<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Computed Variable | REAM</title>
    <meta name="generator" content="VuePress 1.6.0">
    
    <meta name="description" content="Documentation for REAM">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/ream-doc-v2/assets/css/0.styles.920b21fd.css" as="style"><link rel="preload" href="/ream-doc-v2/assets/js/app.bdbb9239.js" as="script"><link rel="preload" href="/ream-doc-v2/assets/js/2.5027a44c.js" as="script"><link rel="preload" href="/ream-doc-v2/assets/js/13.f000a26f.js" as="script"><link rel="prefetch" href="/ream-doc-v2/assets/js/10.7d569214.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/11.9fc57dc2.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/12.682e313d.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/14.53288cde.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/15.8bc2c7e7.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/16.5a6d419a.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/17.7b8d5401.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/18.ff079699.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/19.674e8bb6.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/20.67f20b9f.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/21.903a2cc4.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/22.d9cb5c41.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/23.ad8d2743.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/24.88333e37.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/25.cd582076.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/26.653c9f4c.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/27.04efe45b.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/3.e3c59b08.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/4.27f556f0.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/5.200504d3.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/6.2fe693c8.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/7.fb517c4a.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/8.6b7663cc.js"><link rel="prefetch" href="/ream-doc-v2/assets/js/9.c3078df9.js">
    <link rel="stylesheet" href="/ream-doc-v2/assets/css/0.styles.920b21fd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ream-doc-v2/" class="home-link router-link-active"><!----> <span class="site-name">REAM</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ream-doc-v2/Language/Getting-Started.html" class="nav-link">
  Language
</a></div><div class="nav-item"><a href="/ream-doc-v2/Toolchain/" class="nav-link">
  Toolchain
</a></div><div class="nav-item"><a href="/ream-doc-v2/Contribution/" class="nav-link">
  Contribution
</a></div><div class="nav-item"><a href="https://github.com/chmlee/reamparser.js" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ream-doc-v2/Language/Getting-Started.html" class="nav-link">
  Language
</a></div><div class="nav-item"><a href="/ream-doc-v2/Toolchain/" class="nav-link">
  Toolchain
</a></div><div class="nav-item"><a href="/ream-doc-v2/Contribution/" class="nav-link">
  Contribution
</a></div><div class="nav-item"><a href="https://github.com/chmlee/reamparser.js" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/ream-doc-v2/Language/Specs.html" class="sidebar-link">Specs</a></li><li><a href="/ream-doc-v2/Language/Getting-Started.html" class="sidebar-link">Getting Started</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Basics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ream-doc-v2/Language/Basics/Variable.html" class="sidebar-link">Variable</a></li><li><a href="/ream-doc-v2/Language/Basics/Annotation.html" class="sidebar-link">Annotation</a></li><li><a href="/ream-doc-v2/Language/Basics/Entry.html" class="sidebar-link">Entry</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Advanced</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ream-doc-v2/Language/Advanced/Codebook.html" class="sidebar-link">Codebook</a></li><li><a href="/ream-doc-v2/Language/Advanced/Typed-Variable.html" class="sidebar-link">Typed Variable</a></li><li><a href="/ream-doc-v2/Language/Advanced/Template.html" class="sidebar-link">Template</a></li><li><a href="/ream-doc-v2/Language/Advanced/Computed-Variable.html" aria-current="page" class="active sidebar-link">Computed Variable</a></li><li><a href="/ream-doc-v2/Language/Advanced/Reference.html" class="sidebar-link">Reference</a></li></ul></section></li><li><a href="/ream-doc-v2/Language/Git-Integration.html" class="sidebar-link">Git Integration</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="computed-variable"><a href="#computed-variable" class="header-anchor">#</a> Computed Variable</h1> <div class="custom-block warning"><p class="custom-block-title">NOTE</p> <p>Computed variables are not yet implemented in the parser.</p> <p>Computed variables are functions that returns one or more values, in the form of</p> <div class="language-ream extra-class"><pre class="language-ream"><code><span class="token keyValuePair"><span class="token key"><span class="token punctuation">-</span> function (fn -&gt; return_type)</span><span class="token semiolon punctuation">: </span><span class="token value string">`statements that return values`</span></span>
</code></pre></div><p>Some simple examples:</p> <div class="language-ream extra-class"><pre class="language-ream"><code><span class="token header"><span class="token punctuation">#</span> Numbers</span><span class="token keyValuePair">
<span class="token key"><span class="token punctuation">-</span> one (Number)</span><span class="token semiolon punctuation">: </span><span class="token value number"><span class="token punctuation">$</span>1<span class="token punctuation">$</span></span></span><span class="token keyValuePair">
<span class="token key"><span class="token punctuation">-</span> two (Number)</span><span class="token semiolon punctuation">: </span><span class="token value number"><span class="token punctuation">$</span>2<span class="token punctuation">$</span></span></span><span class="token keyValuePair">
<span class="token key"><span class="token punctuation">-</span> three (Number)</span><span class="token semiolon punctuation">: </span><span class="token value number"><span class="token punctuation">$</span>3<span class="token punctuation">$</span></span></span><span class="token keyValuePair">
<span class="token key"><span class="token punctuation">-</span> four (fn -&gt; Number)</span><span class="token semiolon punctuation">: </span><span class="token value string">`2 + 2`</span></span>
</code></pre></div><div class="language-ream extra-class"><pre class="language-ream"><code><span class="token header"><span class="token punctuation">#</span> CountryYear</span><span class="token keyValuePair">
<span class="token key"><span class="token punctuation">-</span> country (String)</span><span class="token semiolon punctuation">: </span><span class="token value string">Belgium</span></span><span class="token keyValuePair">
<span class="token key"><span class="token punctuation">-</span> year (String)</span><span class="token semiolon punctuation">: </span><span class="token value string">2020</span></span><span class="token keyValuePair">
<span class="token key"><span class="token punctuation">-</span> unique_id (fn -&gt; String)</span><span class="token semiolon punctuation">: </span><span class="token value string">`'Belgium' + '_' + '2020'`</span></span>
</code></pre></div><p>For function with more than one line, the syntax would be:</p> <div class="language-ream extra-class"><pre class="language-ream"><code><span class="token keyValuePair"><span class="token key"><span class="token punctuation">-</span> function (fn -&gt; return_type)</span><span class="token value string">:</span></span>
```language_name
statements
that
return
values
```
</code></pre></div><p>But what language to use?</p> <p>I'm currently rewriting the parser in Rust, with the goal to use the same codebase for both standalone CLI tool and the web-based editor.
That being said, I need this embedded language to</p> <ol><li>be interpreted or compiled just in time,</li> <li>works with WASM,</li> <li>is easy to learn and read.</li></ol> <p>There are <a href="https://arewegameyet.rs/ecosystem/scripting/" target="_blank" rel="noopener noreferrer">a lot of langauges created to be embedded in Rust applications.<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
I've been experimenting with <a href="https://rhai.rs/book/" target="_blank" rel="noopener noreferrer">Rhai<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, and is pleased with how easy it is to integrate the language with Rust.
It has basic libraries for strings and numbers, and it's easy add my own modules.
But one major problem that Rhai, as well as most such languages, has is that my targeted audience most definitely don't know it.
It's hard to convince them to learn a language that has little use outside of REAM; the most popular among those is Lua, and even that would be a hard sell.
Relying too much on these embedable langauges may lead to a steaper learning curve.</p> <p>The second option is to embed a mature language interpreter written in Rust, such as <a href="https://rustpython.github.io/" target="_blank" rel="noopener noreferrer">RustPython<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for Python or <a href="https://github.com/boa-dev/boa" target="_blank" rel="noopener noreferrer">Boa<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for JavaScript.
People are more likely to know these langauges, and may be more willing to learn even if they don't.
One obvious downside is that I have to ship my tool with the language interpreter, while I'm trying to keep the core application small.
It's almost certain that any of such add-ons would be larger in size than the core code base.
Another problem is that most of such projects are not production ready.</p> <p>The third option is to write my own language.
It doesn't have to be a general-purpose turning-complete language, but to simply provide basic methods to manipulate strings, numbers, and other types supported by REAM.
If doing so, the syntax of this language would be similar to Python and supports method chaining.</p> <p>Currently I'm debating between using Rhai and writing my own.
I lean slightly toward writing my own because I want to implement <a href="/ream-doc/Language/Advanced/Reference">Reference</a>.</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ream-doc-v2/Language/Advanced/Template.html" class="prev">
        Template
      </a></span> <span class="next"><a href="/ream-doc-v2/Language/Advanced/Reference.html">
        Reference
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/ream-doc-v2/assets/js/app.bdbb9239.js" defer></script><script src="/ream-doc-v2/assets/js/2.5027a44c.js" defer></script><script src="/ream-doc-v2/assets/js/13.f000a26f.js" defer></script>
  </body>
</html>
